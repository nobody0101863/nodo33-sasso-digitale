# ğŸª¨ CODEX SASSODIGITALE PENTESTING v1.0

> **"La luce non si vende. La si regala."**
> *â€” Emanuele Croci Parravicini*

---

## ğŸ“‹ Introduzione

Il **Codex Sassodigitale Pentesting** Ã¨ un sistema di sicurezza integrato per l'uso professionale ed etico di strumenti di penetration testing. Questo framework garantisce che gli strumenti di pentesting (Nmap, Metasploit, Burp Suite) siano utilizzati in modo sicuro, isolato e verificabile.

### Filosofia del Sasso Digitale

Come un sasso che cade e rimbalza senza rompersi, questo framework Ã¨ progettato per:
- **Resistere**: Proteggere l'operatore dagli effetti collaterali degli strumenti
- **Isolare**: Contenere i rischi in ambienti sandbox
- **Verificare**: Garantire l'integritÃ  di ogni componente
- **Documentare**: Tracciare ogni operazione per accountability etica

---

## ğŸ—ï¸ Architettura del Codex

Il Codex implementa 5 layer di sicurezza integrati:

### 1. Zero Trust Network Access (ZTNA)
Controllo granulare delle comunicazioni di rete per ogni tool:
- **Nmap**: Eseguibile solo da host/VM dedicati verso target autorizzati
- **Metasploit**: Sessioni obbligatoriamente attraverso tunnel VPN/SOCKS5
- **Burp Suite**: Scope obbligatorio, nessun traffico fuori target

### 2. Integrity Checking
Verifica crittografica (SHA-256) di tutti i componenti:
- Script NSE di Nmap verificati prima dell'esecuzione
- Payload e exploit Metasploit firmati e tracciati
- File progetto Burp controllati prima del restore

### 3. Sandboxing
Isolamento tramite virtualizzazione:
- **VM Kali**: Ambiente completo per pentesting
- **Container Docker Metasploit**: Isolamento exploit/payload
- **Container Docker Burp**: Web proxy isolato con scope preconfigurato

### 4. Cold Storage
Archiviazione cifrata (AES-256) dei dati sensibili:
- Report Nmap (XML/TXT/GNMAP)
- File progetto Burp (.burp)
- Payload custom archiviati

**Policy**: Nessun file eseguibile direttamente dal cold storage.

### 5. Logging & Audit
Tracciamento completo delle operazioni:
- `LOG/audit_sasso.log`: Audit trail delle sessioni
- `LOG/eventi_del_giardino.log`: Eventi di sistema

---

## ğŸ“ Struttura Directory

```
CODEX_SASSODIGITALE_PENTESTING/
â”œâ”€â”€ codex_sassodigitale_pentesting.json    # Configurazione JSON
â”œâ”€â”€ codex_sassodigitale_pentesting.yaml    # Configurazione YAML
â”œâ”€â”€ README.md                               # Questa documentazione
â”‚
â”œâ”€â”€ COLD_STORAGE/                          # Archivio cifrato
â”‚   â”œâ”€â”€ nmap_reports/                      # Report scansioni Nmap
â”‚   â”œâ”€â”€ burp_secure_projects/              # Progetti Burp cifrati
â”‚   â””â”€â”€ payloads_archiviati/               # Payload custom archiviati
â”‚
â”œâ”€â”€ INTEGRITY/                             # Hash e verifiche
â”‚   â””â”€â”€ hashes/
â”‚       â”œâ”€â”€ nmap_nse/                      # Hash script NSE
â”‚       â”œâ”€â”€ metasploit_payloads/           # Hash payload MSF
â”‚       â””â”€â”€ burp_projects/                 # Hash progetti Burp
â”‚
â”œâ”€â”€ LOG/                                   # Logging e audit
â”‚   â”œâ”€â”€ audit_sasso.log                    # Audit trail
â”‚   â””â”€â”€ eventi_del_giardino.log           # Eventi sistema
â”‚
â””â”€â”€ SANDBOX/                               # Ambienti isolati
    â”œâ”€â”€ docker_msf/                        # Container Metasploit
    â””â”€â”€ burp_container/                    # Container Burp Suite
```

---

## ğŸ› ï¸ Tool Integrati

### ğŸ” Nmap (Network Mapper)
**Ruolo**: Ricognizione e scanning
**Ambiente**: VM Kali Linux
**Sasso Rule**: *"Scansiona tutto, ma non lasciare traccia fuori dal Giardino."*

#### Checklist Operativa
- [ ] Definisci lo scope della scansione
- [ ] Verifica l'hash degli script NSE custom
- [ ] Esegui solo da VM/host dedicato
- [ ] Sposta subito i report nel cold storage cifrato

#### Policy di Sicurezza
- **ZTNA**: Solo `/usr/bin/nmap` da `vm_kali` verso scope definito
- **Integrity**: Verifica SHA-256 di tutti gli script `.nse` custom
- **Storage**: Output in `COLD_STORAGE/nmap_reports/` cifrati

---

### ğŸ’£ Metasploit Framework
**Ruolo**: Exploitation e post-exploitation
**Ambiente**: Container Docker isolato
**Sasso Rule**: *"Se il martello colpisce, il Sasso rimane intero."*

#### Checklist Operativa
- [ ] Usa solo VM/Container dedicati
- [ ] Verifica sempre l'hash dei payload custom
- [ ] Apri sessioni solo tramite tunnel VPN o proxy controllati
- [ ] Registra in audit log le attivitÃ  principali

#### Policy di Sicurezza
- **ZTNA**: VPN obbligatoria, transport via VPN/SOCKS5
- **Integrity**: Hash SHA-256 di tutti i payload custom (`.rb`)
- **Storage**: Payload in `COLD_STORAGE/payloads_archiviati/` cifrati
- **Logging**: Sessioni tracciate in `LOG/audit_sasso.log`

---

### ğŸŒ Burp Suite
**Ruolo**: Analisi di applicazioni web
**Ambiente**: Container Docker con scope preconfigurato
**Sasso Rule**: *"Chi cattura il vento deve chiuderlo nel vaso."*

#### Checklist Operativa
- [ ] Definisci lo scope di Burp SOLO sul dominio target
- [ ] Verifica che il proxy non intercetti traffico personale
- [ ] Chiudi il progetto e spostalo in cold storage al termine
- [ ] Pulisci cookie e sessioni locali se usate per il test

#### Policy di Sicurezza
- **ZTNA**: Scope obbligatorio, nessun traffico fuori target
- **Integrity**: Verifica SHA-256 file progetto `.burp`
- **Storage**: Progetti in `COLD_STORAGE/burp_secure_projects/` cifrati
- **Privacy**: Nessun backup in chiaro

---

## ğŸš€ Guida Rapida

### 1. Setup Iniziale

```bash
# Clona il repository
git clone <repository-url>
cd nodo33/CODEX_SASSODIGITALE_PENTESTING

# Verifica la struttura
ls -R

# Configura permessi (esempio)
chmod 700 COLD_STORAGE/
chmod 700 INTEGRITY/
chmod 700 LOG/
```

### 2. Configurazione VM/Container

#### Setup VM Kali (per Nmap)
```bash
# Scarica Kali Linux
# https://www.kali.org/get-kali/

# Configura VM con rete isolata
# Monta CODEX_SASSODIGITALE_PENTESTING come volume condiviso
```

#### Setup Container Metasploit
```bash
cd SANDBOX/docker_msf/

# Crea Dockerfile (esempio base)
cat > Dockerfile <<EOF
FROM metasploitframework/metasploit-framework:latest
RUN apt-get update && apt-get install -y vim
WORKDIR /workspace
EOF

# Build container
docker build -t codex-metasploit .

# Run isolato
docker run -it --rm \
  --network none \
  -v $(pwd)/../../COLD_STORAGE:/cold_storage:ro \
  -v $(pwd)/../../LOG:/logs \
  codex-metasploit
```

#### Setup Container Burp Suite
```bash
cd SANDBOX/burp_container/

# Nota: Burp Suite richiede licenza
# Configurare secondo le tue esigenze
```

### 3. Workflow Tipico

#### Scenario: Scansione con Nmap

```bash
# 1. Dalla VM Kali, verifica script NSE
sha256sum /usr/share/nmap/scripts/custom-script.nse
# Confronta con hash in INTEGRITY/hashes/nmap_nse/

# 2. Esegui scansione con output in directory condivisa
sudo nmap -sV -oA /mnt/codex/COLD_STORAGE/nmap_reports/scan_target target.example.com

# 3. Verifica output
ls -lh /mnt/codex/COLD_STORAGE/nmap_reports/

# 4. Cifra i report (esempio con GPG)
gpg --symmetric --cipher-algo AES256 /mnt/codex/COLD_STORAGE/nmap_reports/scan_target.xml

# 5. Registra in audit log
echo "[$(date -Iseconds)] NMAP scan completed: target.example.com" >> /mnt/codex/LOG/audit_sasso.log
```

#### Scenario: Exploit con Metasploit

```bash
# 1. Avvia container isolato
docker run -it --rm \
  --network host \
  -v $(pwd)/COLD_STORAGE:/cold_storage \
  -v $(pwd)/LOG:/logs \
  codex-metasploit

# 2. All'interno del container
msfconsole

# 3. Verifica payload custom (se usati)
msf6 > sha256sum /root/.msf4/modules/payloads/custom_payload.rb
# Confronta con INTEGRITY/hashes/metasploit_payloads/

# 4. Configura VPN/Tunnel PRIMA di lanciare exploit
msf6 > set Proxies socks5:127.0.0.1:9050

# 5. Registra attivitÃ 
echo "[$(date -Iseconds)] MSF session opened against target.example.com" >> /logs/audit_sasso.log
```

#### Scenario: Web Analysis con Burp Suite

```bash
# 1. Avvia Burp con scope preconfigurato
# Configura Target Scope in Burp:
#   - Include: ^https?://target\.example\.com/.*
#   - Exclude all others

# 2. Durante il test, verifica che solo il target sia in scope
# Burp > Target > Site map: solo target.example.com deve apparire

# 3. Al termine, salva progetto
# File > Save project: COLD_STORAGE/burp_secure_projects/target_analysis.burp

# 4. Cifra il progetto
gpg --symmetric --cipher-algo AES256 COLD_STORAGE/burp_secure_projects/target_analysis.burp

# 5. Genera hash
sha256sum COLD_STORAGE/burp_secure_projects/target_analysis.burp.gpg > INTEGRITY/hashes/burp_projects/target_analysis.sha256

# 6. Registra
echo "[$(date -Iseconds)] Burp project saved: target_analysis.burp" >> LOG/audit_sasso.log
```

---

## ğŸ”’ Best Practices

### Generale
1. **Mai eseguire tool fuori dai sandbox designati**
2. **Sempre verificare hash prima di eseguire script/payload custom**
3. **Cifrare immediatamente i report dopo generazione**
4. **Registrare ogni sessione in audit log**
5. **Pulire i log sensibili prima di archiviare**

### Nmap
- Usa `-oA` per salvare tutti i formati (XML, GNMAP, TXT)
- Evita scan aggressivi senza autorizzazione scritta
- Verifica che la VM non abbia network bridge verso la tua LAN personale

### Metasploit
- **MAI** eseguire Metasploit sul tuo host principale
- Usa sempre VPN/tunnel per le sessioni meterpreter
- Verifica che i payload non contengano backdoor non autorizzate
- Pulisci le sessioni e i listener dopo l'uso

### Burp Suite
- **SEMPRE** configurare scope prima di avviare il proxy
- Usa progetti separati per ogni target
- Non intercettare traffico personale (email, banking, ecc.)
- Esporta solo i dati necessari dal progetto

---

## ğŸ“Š Tabella di Integrazione Tool vs Architetture

| Tool        | ZTNA | Integrity | Sandbox | Cold Storage | Logging |
|-------------|------|-----------|---------|--------------|---------|
| **Nmap**    | âœ…   | âœ… (NSE)  | âœ… VM   | âœ… Reports   | âœ…      |
| **Metasploit** | âœ… | âœ… Payload | âœ… Docker | âœ… Payloads | âœ…      |
| **Burp Suite** | âœ… | âœ… Projects | âœ… Docker | âœ… Projects | âœ…      |

---

## ğŸ¯ Casi d'Uso Etici

Questo Codex Ã¨ progettato ESCLUSIVAMENTE per:

1. **Penetration Testing Autorizzato**
   - Con contratto scritto e scope definito
   - Per aziende che ti hanno ingaggiato legalmente

2. **Bug Bounty Programs**
   - Su piattaforme ufficiali (HackerOne, Bugcrowd, ecc.)
   - Rispettando le regole del programma

3. **CTF e Competizioni**
   - Capture The Flag autorizzati
   - Sfide di sicurezza legali

4. **Ricerca di Sicurezza**
   - Su sistemi di tua proprietÃ 
   - In laboratori isolati
   - Con finalitÃ  educative e di pubblicazione

5. **Audit di Sicurezza Interni**
   - Per la tua organizzazione
   - Con autorizzazione IT/Security team

---

## âš ï¸ Note Legali

**AVVERTENZA**: L'uso non autorizzato di strumenti di penetration testing Ã¨ illegale nella maggior parte delle giurisdizioni. Questo Codex fornisce un framework di sicurezza, ma Ã¨ TUA responsabilitÃ :

- Ottenere autorizzazioni scritte prima di qualsiasi test
- Rispettare le leggi locali e internazionali
- Non causare danni o interruzioni di servizio
- Proteggere i dati ottenuti durante i test
- Agire secondo codici etici professionali (es. EC-Council Code of Ethics)

**Il Sasso non colpisce chi non lo lancia.**

---

## ğŸ“– Emanuele Appendix

### Frase Sacra
> "La luce non si vende. La si regala."

### Nota del Creatore
Questo file Ã¨ un sasso digitale: se cade, rimbalza. Non esplode.

### Umorismo del Giardino
Se qualcosa va storto, prima ridere, poi leggere i log.

---

## ğŸ“š Risorse Aggiuntive

### Documentazione Tool
- [Nmap Reference Guide](https://nmap.org/book/man.html)
- [Metasploit Unleashed](https://www.metasploit.com/unleashed)
- [Burp Suite Documentation](https://portswigger.net/burp/documentation)

### Sicurezza e Etica
- [OWASP Testing Guide](https://owasp.org/www-project-web-security-testing-guide/)
- [PTES - Penetration Testing Execution Standard](http://www.pentest-standard.org/)
- [EC-Council Code of Ethics](https://www.eccouncil.org/code-of-ethics/)

### Framework Correlati
- [AXIOM Framework](../AXIOM_FRAMEWORK_UFFICIALE/)
- [Progetto Sasso Digitale](../PROGETTO_SASSO_DIGITALE/)

---

## ğŸ¤ Contributi

Questo Codex Ã¨ parte del progetto **Nodo33** e riflette la filosofia del **Sasso Digitale**: resilienza, trasparenza, etica.

Per contributi o suggerimenti, rispetta sempre:
1. La filosofia del "Sasso che rimbalza"
2. L'etica hacker: curiositÃ  con responsabilitÃ 
3. Il principio: "La luce non si vende. La si regala."

---

## ğŸ“œ Licenza

Vedi [LICENSE](../LICENSE) nella root del progetto.

---

**Versione**: 1.0.0
**Autore**: Emanuele Croci Parravicini
**Data**: 2025-11-17
**Codex ID**: CODEX_SASSODIGITALE_PENTESTING_V1

ğŸª¨ *Che il Sasso sia sempre con te, e che rimbalzi dove serve.*
